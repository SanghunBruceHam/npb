# NPB Dashboard

ì¼ë³¸ í”„ë¡œì•¼êµ¬(NPB) ë°ì´í„° ìˆ˜ì§‘ ë° ë¶„ì„ ì‹œìŠ¤í…œ

## ğŸ“‹ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
npb/
â”œâ”€â”€ crawler/                # ë°ì´í„° ìˆ˜ì§‘ ì‹œìŠ¤í…œ
â”‚   â”œâ”€â”€ npb_crawler.py     # ë©”ì¸ í¬ë¡¤ëŸ¬ (ê²°ê³¼ + ì˜ˆì •)
â”‚   â”œâ”€â”€ config.py          # ì„¤ì • íŒŒì¼
â”‚   â”œâ”€â”€ utils.py           # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ cleanup.py         # íŒŒì¼ ì •ë¦¬
â”‚   â”œâ”€â”€ logs/              # í¬ë¡¤ë§ ë¡œê·¸
â”‚   â””â”€â”€ venv/              # Python ê°€ìƒí™˜ê²½
â”œâ”€â”€ api/            # FastAPI ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ server.py   # API ì„œë²„
â”‚   â”œâ”€â”€ models/     # ë°ì´í„° ëª¨ë¸
â”‚   â”œâ”€â”€ routes/     # API ë¼ìš°íŠ¸
â”‚   â”œâ”€â”€ utils/      # ìœ í‹¸ë¦¬í‹° (ë§¤ì§ë„˜ë²„ ë“±)
â”‚   â””â”€â”€ venv/       # Python ê°€ìƒí™˜ê²½
â”œâ”€â”€ web/            # Next.js í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ app/        # App Router í˜ì´ì§€
â”‚   â”œâ”€â”€ components/ # React ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ lib/        # ìœ í‹¸ë¦¬í‹°
â”œâ”€â”€ index.html      # ì´ˆë¯¸ë‹ˆë©€ NPB ëŒ€ì‹œë³´ë“œ (GitHub Pages + ë¡œì»¬)\nâ”‚   â””â”€â”€ index.html  # ê³ ê¸‰ í”„ëŸ°íŠ¸ì—”ë“œ (ì°¨íŠ¸, ë‹¤í¬ëª¨ë“œ)\nâ”œâ”€â”€ index.html      # GitHub Pages ë©”ì¸ (ê³ ê¸‰ ì°¨íŠ¸, ë‹¤í¬ëª¨ë“œ)\nâ”œâ”€â”€ data/           # ì •ì  JSON ë°ì´í„°\nâ”œâ”€â”€ docs/           # GitHub Pages ë°±ì—…
â”‚   â”œâ”€â”€ index.html  # GitHub Pages ë°°í¬ìš©\nâ”‚   â””â”€â”€ data/       # ì •ì  JSON ë°ì´í„°
â”œâ”€â”€ scripts/                # ìë™í™” ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ automation.py      # ì¼ì¼ ìë™ í¬ë¡¤ë§
â”‚   â””â”€â”€ data_manager.py    # ë°ì´í„° ê´€ë¦¬
â”œâ”€â”€ .github/workflows/     # GitHub Actions
â”‚   â””â”€â”€ npb-crawler.yml # ìë™ í¬ë¡¤ë§
â”œâ”€â”€ run_api.sh      # API ì„œë²„ ì‹¤í–‰
â”œâ”€â”€ run_web.sh      # Next.js ì‹¤í–‰
â”œâ”€â”€ run_html.sh     # HTML ë²„ì „ ì‹¤í–‰
â””â”€â”€ README.md
```

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### 1. í™˜ê²½ ì„¤ì •
```bash
cd crawler
./setup.sh
```

### 2. PostgreSQL ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
```bash
createdb npb_dashboard_dev
```

### 3. í™˜ê²½ë³€ìˆ˜ ì„¤ì •
```bash
cp .env.example .env
# DB ì •ë³´ë¥¼ .env íŒŒì¼ì— ì…ë ¥
```

### 4. í¬ë¡¤ëŸ¬ ì‹¤í–‰
```bash
cd crawler
source venv/bin/activate
python npb_crawler.py --test    # í…ŒìŠ¤íŠ¸ (3ì¼)
python npb_crawler.py 7         # 7ì¼ì¹˜ í¬ë¡¤ë§
```

## ğŸ¤– ìë™í™”ëœ í¬ë¡¤ë§

### GitHub Actions
- **ìë™ ì‹¤í–‰**: ë§¤ì¼ JST 16:30 ~ 23:30ê¹Œì§€ 30ë¶„ë§ˆë‹¤ (ì´ 15íšŒ)
- **ìˆ˜ë™ ì‹¤í–‰**: Actions íƒ­ì—ì„œ ì–¸ì œë“ ì§€ ì‹¤í–‰ ê°€ëŠ¥

### í•„ìš”í•œ Secrets ì„¤ì •
GitHub ì €ì¥ì†Œ Settings > Secretsì—ì„œ ì„¤ì •:
```
DB_HOST: ë°ì´í„°ë² ì´ìŠ¤ í˜¸ìŠ¤íŠ¸
DB_PORT: í¬íŠ¸ (ê¸°ë³¸: 5432)
DB_NAME: ë°ì´í„°ë² ì´ìŠ¤ ì´ë¦„
DB_USER: ì‚¬ìš©ìëª…
DB_PASSWORD: ë¹„ë°€ë²ˆí˜¸
```

## ğŸ“Š ìˆ˜ì§‘ ë°ì´í„°

- **ê²½ê¸° ê²°ê³¼**: ì¼ë³„ NPB ê²½ê¸° ê²°ê³¼ (753ê²½ê¸° ìˆ˜ì§‘ ì™„ë£Œ)
- **ì´ë‹ë³„ ë“ì **: ê° ì´ë‹ë³„ ë“ì  ìƒì„¸ ì •ë³´ (JSON í˜•íƒœ)
- **ìˆœìœ„í‘œ**: ê²½ê¸° ê²°ê³¼ ê¸°ë°˜ ìë™ ê³„ì‚°
- **íŠ¹ìˆ˜ ê²½ê¸°**: ì—°ì¥ì „, ë¬´ìŠ¹ë¶€, ì·¨ì†Œ ê²½ê¸° ì²˜ë¦¬

## ğŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### teams í…Œì´ë¸”
- 12ê°œ NPB íŒ€ ì •ë³´ (ì„¼íŠ¸ëŸ´/í¼ì‹œí”½ ë¦¬ê·¸)

### games í…Œì´ë¸”
- ê²½ê¸° ê²°ê³¼ ë° ì„¸ë¶€ ì •ë³´
- ì´ë‹ë³„ ë“ì  (JSONB)
- ì—°ì¥ì „, ë¬´ìŠ¹ë¶€, ê²½ê¸° ìƒíƒœ

### standings í…Œì´ë¸”
- ì‹œì¦Œë³„ íŒ€ ìˆœìœ„
- ìŠ¹ë¥ , ê²Œì„ì°¨, ë§¤ì§ë„˜ë²„

### crawl_logs í…Œì´ë¸”
- í¬ë¡¤ë§ í™œë™ ë¡œê·¸
- ì„±ê³µ/ì‹¤íŒ¨ ê¸°ë¡

## ğŸ”— ë°ì´í„° ì†ŒìŠ¤

**ë‹ˆì¹¸ìŠ¤í¬ì¸ ** (https://www.nikkansports.com)
- ì•ˆì •ì ì¸ URL íŒ¨í„´
- ì¼ê´€ëœ ë°ì´í„° êµ¬ì¡°
- ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
- NPB 12ê°œ íŒ€ ì „ì²´ ì§€ì›

## ğŸš€ ì„±ëŠ¥ ê°œì„  ê²°ê³¼

- **ìˆ˜ì§‘ ê²½ê¸°ìˆ˜**: 169ê²½ê¸° â†’ **753ê²½ê¸°** (4.5ë°° ì¦ê°€)
- **íŒŒì‹± ì„±ê³µë¥ **: 16.7% â†’ **100%** (í•˜ë£¨ 1ê²½ê¸° â†’ 6ê²½ê¸° ëª¨ë‘)
- **íŒ€ëª… ë³€í™˜**: ì‹¤íŒ¨ â†’ **100% ì„±ê³µ** (NPB 12ê°œ íŒ€)
- **ë°ì´í„° ì™„ì „ì„±**: ê¸°ë³¸ ì •ë³´ â†’ **ì´ë‹ë³„ ì„¸ë¶€ ì •ë³´** í¬í•¨\n- **í”„ëŸ°íŠ¸ì—”ë“œ ê³ ë„í™”**: ê¸°ë³¸ HTML â†’ **Chart.js + ë‹¤í¬ëª¨ë“œ + ëª¨ë°”ì¼ ìµœì í™”**\n- **ë°ì´í„° ì‹œê°í™”**: í…ìŠ¤íŠ¸ â†’ **ë‹¤ì¤‘ ì°¨íŠ¸ íƒ€ì… (ë§‰ëŒ€/ì„ /ë ˆì´ë”)**\n- **ì‚¬ìš©ì ê²½í—˜**: ì •ì  â†’ **ì¸í„°ë™í‹°ë¸Œ ì• ë‹ˆë©”ì´ì…˜ + ì‹¤ì‹œê°„ ì „í™˜**

## ğŸ“ ì‚¬ìš©ë²•

### ìˆ˜ë™ ì‹¤í–‰
```bash
# í…ŒìŠ¤íŠ¸ í¬ë¡¤ë§ (3ì¼)
python npb_crawler.py --test

# íŠ¹ì • ì¼ìˆ˜ í¬ë¡¤ë§
python npb_crawler.py 7

# ì „ì²´ ì‹œì¦Œ í¬ë¡¤ë§
python npb_crawler.py --season
```

### ë¡œê·¸ í™•ì¸
```bash
# ë¡œì»¬ ì‹¤í–‰ì‹œ ë¡œê·¸ í™•ì¸
tail -f crawler/logs/crawler_YYYYMMDD.log
```

## ğŸ” ëª¨ë‹ˆí„°ë§

### ë¡œê·¸ íŒŒì¼
- `crawler/logs/crawler_YYYYMMDD.log`: ì¼ë³„ í¬ë¡¤ë§ ë¡œê·¸

### GitHub Actions ë¡œê·¸
- Actions íƒ­ì—ì„œ ì‹¤í–‰ ê²°ê³¼ í™•ì¸
- ì‹¤íŒ¨ì‹œ ì•„í‹°íŒ©íŠ¸ë¡œ ë¡œê·¸ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥

## ğŸ”Œ API ì„œë²„ (NEW!)

### FastAPI ë°±ì—”ë“œ ì‹¤í–‰
```bash
./run_api.sh
```

### API ì—”ë“œí¬ì¸íŠ¸
- **ë©”ì¸ ëŒ€ì‹œë³´ë“œ**: `GET /dashboard` - ì˜¤ëŠ˜ ê²½ê¸° + ê°„ëµí•œ ìˆœìœ„í‘œ
- **ìˆœìœ„í‘œ**: `GET /standings` - ì „ì²´ ìˆœìœ„í‘œ ë° ë§¤ì§ë„˜ë²„
- **ë§¤ì§ë„˜ë²„**: `GET /standings/magic-numbers` - ìš°ìŠ¹/íƒˆë½ ì‹œë‚˜ë¦¬ì˜¤ 
- **ê²½ê¸° ê²°ê³¼**: `GET /games` - ê²½ê¸° ê²°ê³¼ ì¡°íšŒ (ë‚ ì§œ/íŒ€ í•„í„°)
- **íŒ€ ìƒì„¸**: `GET /teams/{team_id}` - íŒ€ë³„ ìƒì„¸ í†µê³„
- **ìƒëŒ€ì „ì **: `GET /teams/{team_id}/vs/{opponent_id}` - íŒ€ê°„ ìƒëŒ€ì „ì 

### API ë¬¸ì„œ
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

## ğŸŒ í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰

### Option 1: Next.js (ì™„ì „í•œ React ì•±)
```bash
./run_web.sh
# http://localhost:3000
```

### Option 2: ê³ ê¸‰ HTML (ì°¨íŠ¸, ë‹¤í¬ëª¨ë“œ í¬í•¨)
```bash
./run_html.sh
# ë¸Œë¼ìš°ì €ì—ì„œ html/index.html ì—´ë¦¼\n# ğŸ“Š Chart.js ì°¨íŠ¸, ğŸŒ™ ë‹¤í¬ëª¨ë“œ, ğŸ“± ëª¨ë°”ì¼ ìµœì í™”
```

### Option 3: GitHub Pages (ì •ì  ë°°í¬)
```bash
# 1. ì •ì  ë°ì´í„° ìƒì„±
python scripts/generate_static_data.py

# 2. GitHubì— í‘¸ì‹œí•˜ê³  Pages í™œì„±í™”
# 3. https://username.github.io/npb ì ‘ì†
```

### ì£¼ìš” ì°¨ì´ì 
- **Next.js**: ì™„ì „í•œ SPA, ë¼ìš°íŒ…, ìµœì í™”
- **ê³ ê¸‰ HTML**: ì°¨íŠ¸, ì• ë‹ˆë©”ì´ì…˜, ë‹¤í¬ëª¨ë“œ, ë¡œì»¬ ì‹¤í–‰ìš©  
- **GitHub Pages**: ì„œë²„ ë¶ˆí•„ìš”, ê¸€ë¡œë²Œ ë°°í¬

## ğŸŒ GitHub Pages ë°°í¬ ì„¤ì •

### 1. Repository Settings 
- Settings > Pages > Source: "GitHub Actions"

### 2. ìë™ ë°°í¬ ì›Œí¬í”Œë¡œìš°
- í¬ë¡¤ëŸ¬ ì‹¤í–‰ â†’ ë°ì´í„° ìƒì„± â†’ GitHub Pages ìë™ ë°°í¬
- `.github/workflows/generate-static-data.yml` 

### 3. ë°°í¬ URL
- `https://yourusername.github.io/npb`

## ğŸ“ˆ ë‹¤ìŒ ë‹¨ê³„

1. **ë°ì´í„° ì‹œê°í™”** - ì°¨íŠ¸ ë° ê·¸ë˜í”„ âœ¨  
2. **ì•Œë¦¼ ì‹œìŠ¤í…œ** - ê²½ê¸° ê²°ê³¼ ì•Œë¦¼
3. **ëª¨ë°”ì¼ ì•±** - React Native/Flutter
4. **ì„ ìˆ˜ í†µê³„** - ê°œì¸ ì„±ì  ì¶”ê°€

## ğŸ“ ë¼ì´ì„ ìŠ¤

MIT License